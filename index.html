<!DOCTYPE html>
<html lang="es">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GYJ40Q6P1G"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-GYJ40Q6P1G');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Calculadora Factura Aut√≥nomo 2025 (IVA e IRPF) - PDF Gratis</title>
    <meta name="description" content="Calculadora precisa de facturas para aut√≥nomos. Calcula IVA, IRPF y l√≠quido a percibir. Genera tu factura en PDF gratis y al instante.">
    <meta name="keywords" content="calculadora iva irpf, calcular factura autonomo, retencion irpf 2025, modelo factura excel, cuanto cobrar neto">
    <meta name="robots" content="index, follow">
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "¬øQu√© IRPF debo poner en mi factura?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "La norma general es el 15%. Si eres nuevo aut√≥nomo, puedes aplicar el 7% durante el a√±o de inicio y los dos siguientes."
        }
      }, {
        "@type": "Question",
        "name": "¬øEl IRPF se suma o se resta?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "El IRPF siempre se resta de la base imponible. Es un dinero que tu cliente ingresa a Hacienda en tu nombre (anticipo de tus impuestos)."
        }
      }]
    }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #0d1117;
            --card-bg: #161b22;
            --text-main: #e6edf3;
            --text-muted: #8b949e;
            --accent: #2ea043;
            --accent-hover: #238636;
            --border: #30363d;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        .main-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        header { text-align: center; margin: 2rem 0; }
        h1 { color: var(--accent); font-size: 2.2rem; margin-bottom: 0.5rem; letter-spacing: -1px; }
        .subtitle { color: var(--text-muted); font-size: 1rem; }

        /* CARD PRINCIPAL */
        .calculator-card {
            background-color: var(--card-bg);
            padding: 2.5rem;
            border-radius: 16px;
            width: 100%;
            max-width: 500px;
            border: 1px solid var(--border);
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
        }

        /* INPUTS */
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #c9d1d9; font-size: 0.9rem; }
        .input-group { margin-bottom: 1.5rem; }
        
        input[type="number"], select {
            width: 100%;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: #0d1117;
            color: white;
            font-size: 18px;
            font-family: 'Inter', sans-serif;
            box-sizing: border-box;
            transition: 0.2s;
        }
        input[type="number"]:focus, select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(46, 160, 67, 0.2);
        }

        /* RESULTADOS */
        .results-box {
            background: #21262d;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1rem;
            border: 1px solid var(--border);
        }
        .result-row {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 5px;
            font-size: 1rem;
        }
        .result-row.total-row {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid var(--border);
            font-size: 1.3rem;
            color: var(--accent);
            font-weight: 800;
        }
        
        .result-label { color: var(--text-muted); }
        .result-value { font-weight: 600; }
        
        /* Tooltips did√°cticos */
        .tax-explain {
            display: block;
            font-size: 0.75rem;
            color: #6e7681;
            margin-bottom: 10px;
            font-style: italic;
        }

        /* BOTONES DE ACCI√ìN */
        .actions-container {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            transition: 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        .btn-primary { background-color: #238636; color: white; }
        .btn-primary:hover { background-color: #2ea043; }
        
        .btn-secondary { background-color: #30363d; color: #e6edf3; }
        .btn-secondary:hover { background-color: #3b434b; }

        /* LEGAL WARNING */
        .legal-warning {
            margin-top: 15px;
            font-size: 0.75rem;
            color: #8b949e;
            background: rgba(255,255,0,0.05);
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #30363d;
        }

        /* ADS */
        .ad-space {
            width: 100%;
            height: 100px;
            background: #161b22;
            margin: 30px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #444;
            border: 1px dashed #444;
            border-radius: 8px;
            font-size: 0.8rem;
        }
        
        .ad-mini {
            height: 60px;
            margin: 15px 0 0 0;
            font-size: 0.7rem;
            background: #0d1117;
        }

        /* CONTENIDO SEO */
        .seo-content { max-width: 700px; margin-top: 3rem; color: var(--text-muted); }
        .seo-content h2 { color: var(--text-main); margin-top: 2rem; }
        
        footer { margin-top: 3rem; text-align: center; font-size: 0.8rem; color: #484f58; padding-bottom: 2rem; }

        /* ESTILOS PARA IMPRESI√ìN (PDF LIMPIO) */
        @media print {
            body { background-color: white; color: black; }
            .calculator-card { box-shadow: none; border: 2px solid #000; padding: 20px; max-width: 100%; }
            .input-group, .actions-container, .ad-space, .seo-content, footer, .subtitle { display: none; }
            header { margin: 0; text-align: left; }
            h1 { color: black; font-size: 1.5rem; }
            .results-box { border: none; padding: 0; color: black; }
            .result-value { color: black !important; }
            .tax-explain { display: none; } /* Ocultar explicaciones en la factura impresa */
            .main-wrapper { padding: 0; display: block; }
            
            /* Simular cabecera de factura */
            header::after {
                content: "C√°lculo orientativo generado en CalculadoraFreelance";
                display: block;
                font-size: 0.8rem;
                margin-bottom: 20px;
                border-bottom: 1px solid #000;
                padding-bottom: 10px;
            }
        }
    </style>
</head>
<body>

    <div class="main-wrapper">
        <header>
            <h1>Calculadora Factura Aut√≥nomo</h1>
            <p class="subtitle">Calcula IVA, IRPF y l√≠quido en segundos</p>
        </header>

        <div class="calculator-card">
            <div class="input-group">
                <label for="base">Base Imponible (‚Ç¨)</label>
                <input type="number" id="base" placeholder="Ej: 1000" step="0.01" min="0" oninput="calcular()" aria-label="Base imponible en euros">
            </div>

            <div class="input-group" style="display: flex; gap: 10px;">
                <div style="flex: 1;">
                    <label for="iva">IVA (%)</label>
                    <select id="iva" onchange="calcular()" aria-label="Seleccionar porcentaje de IVA">
                        <option value="0.21" selected>21% (General)</option>
                        <option value="0.10">10% (Reducido)</option>
                        <option value="0.04">4% (Super)</option>
                        <option value="0">0% (Exento)</option>
                    </select>
                </div>
                <div style="flex: 1;">
                    <label for="irpf">IRPF (%)</label>
                    <select id="irpf" onchange="calcular()" aria-label="Seleccionar porcentaje de IRPF">
                        <option value="0.15" selected>15% (General)</option>
                        <option value="0.07">7% (Nuevos)</option>
                        <option value="0.01">1% (M√≥dulos)</option>
                        <option value="0">0% (Sin IRPF)</option>
                    </select>
                </div>
            </div>

            <div class="results-box">
                <div class="result-row">
                    <span class="result-label">Base Imponible:</span>
                    <span class="result-value" id="res-base">0,00 ‚Ç¨</span>
                </div>

                <div class="result-row">
                    <span class="result-label">+ IVA:</span>
                    <span class="result-value" style="color:#ff7b72" id="res-iva">0,00 ‚Ç¨</span>
                </div>
                <span class="tax-explain">Dinero que cobras pero debes devolver a Hacienda trimestralmente.</span>

                <div class="result-row">
                    <span class="result-label">- IRPF (Retenci√≥n):</span>
                    <span class="result-value" style="color:#79c0ff" id="res-irpf">0,00 ‚Ç¨</span>
                </div>
                <span class="tax-explain">Adelanto de impuestos que tu cliente paga por ti.</span>

                <div class="result-row total-row">
                    <span class="result-label">TOTAL FACTURA:</span>
                    <span class="result-value" id="res-total">0,00 ‚Ç¨</span>
                </div>
                <span class="tax-explain">El importe final que debes poner en la factura.</span>
                
                <div class="ad-space ad-mini">Publicidad</div>

                <div class="result-row" style="margin-top:15px; border-top: 1px dashed #30363d; padding-top:10px;">
                    <span class="result-label">L√≠quido real (Banco):</span>
                    <span class="result-value" style="color:#2ea043" id="res-liquido">0,00 ‚Ç¨</span>
                </div>
                <span class="tax-explain">Lo que realmente te queda (Base - IRPF).</span>
            </div>
            
            <div class="legal-warning">
                ‚ö†Ô∏è <strong>Nota:</strong> C√°lculo informativo. Revisa tus obligaciones fiscales con un gestor colegiado.
            </div>

            <div class="actions-container">
                <button class="btn btn-secondary" onclick="copiarDesglose()">
                    üìã Copiar Texto
                </button>
                <button class="btn btn-primary" onclick="window.print()">
                    üìÑ Descargar PDF
                </button>
            </div>
        </div>

        <div class="ad-space">Espacio Publicitario (Google AdSense)</div>

        <div class="seo-content">
            <h2>¬øC√≥mo calcular una factura de aut√≥nomo correctamente?</h2>
            <p>Muchos freelancers cometen el error de gastar el total de la factura. Recuerda: el IVA no es tuyo. Nuestra calculadora te muestra el <strong>l√≠quido real</strong> para que planifiques mejor tu econom√≠a.</p>
            
            <h3>Gu√≠a r√°pida de impuestos 2025</h3>
            <ul>
                <li><strong>IRPF Reducido (7%):</strong> Solo si te has dado de alta este a√±o o los dos anteriores y no has sido aut√≥nomo antes.</li>
                <li><strong>IRPF General (15%):</strong> La tarifa est√°ndar para profesionales.</li>
            </ul>
        </div>

        <footer>
            <p>&copy; 2025 CalculadoraFreelance. <a href="#" style="color:#8b949e">Aviso Legal</a></p>
        </footer>
    </div>

    <script>
        // Cargar datos guardados al iniciar
        window.onload = function() {
            if(localStorage.getItem('savedBase')) {
                document.getElementById('base').value = localStorage.getItem('savedBase');
                document.getElementById('iva').value = localStorage.getItem('savedIva');
                document.getElementById('irpf').value = localStorage.getItem('savedIrpf');
                calcular();
            }
        };

        function calcular() {
            // 1. Obtener valores
            let baseInput = document.getElementById('base').value;
            let base = parseFloat(baseInput) || 0;
            let ivaPorcentaje = parseFloat(document.getElementById('iva').value);
            let irpfPorcentaje = parseFloat(document.getElementById('irpf').value);

            // 2. Guardar en LocalStorage (Auto-save)
            localStorage.setItem('savedBase', baseInput);
            localStorage.setItem('savedIva', ivaPorcentaje);
            localStorage.setItem('savedIrpf', irpfPorcentaje);

            // 3. C√°lculos
            let ivaCantidad = base * ivaPorcentaje;
            let irpfCantidad = base * irpfPorcentaje;
            let totalFactura = base + ivaCantidad - irpfCantidad;
            
            // CORRECCI√ìN IMPORTANTE: El l√≠quido es Base - IRPF (o Total - IVA)
            // Este es el dinero que "te pertenece" antes de impuestos anuales
            let liquido = base - irpfCantidad; 

            // 4. Formatear
            const formatoEuro = new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR' });

            document.getElementById('res-base').innerText = formatoEuro.format(base);
            document.getElementById('res-iva').innerText = formatoEuro.format(ivaCantidad);
            document.getElementById('res-irpf').innerText = formatoEuro.format(irpfCantidad);
            document.getElementById('res-total').innerText = formatoEuro.format(totalFactura);
            document.getElementById('res-liquido').innerText = formatoEuro.format(liquido); 
        }

        function copiarDesglose() {
            let base = document.getElementById('res-base').innerText;
            let iva = document.getElementById('res-iva').innerText;
            let irpf = document.getElementById('res-irpf').innerText;
            let total = document.getElementById('res-total').innerText;
            
            let texto = `üßÆ C√°lculo Factura:\n\nBase: ${base}\n+ IVA: ${iva}\n- IRPF: ${irpf}\n\nüí∞ TOTAL A COBRAR: ${total}`;
            
            navigator.clipboard.writeText(texto).then(() => {
                alert("¬°Desglose copiado! Listo para pegar en email o WhatsApp.");
            });
        }
    </script>
</body>
</html>
